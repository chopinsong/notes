<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>简单加载测试</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .container { max-width: 1000px; margin: 0 auto; }
        .controls { margin: 20px 0; }
        button { padding: 10px 20px; margin: 5px; background: #3498db; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #2980b9; }
        iframe { width: 100%; height: 500px; border: 1px solid #ccc; }
        .log { background: #f8f9fa; padding: 10px; margin: 10px 0; border-radius: 4px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto; }
    </style>
</head>
<body>
    <div class="container">
        <h1>简单加载测试</h1>
        
        <div class="controls">
            <button onclick="loadNote1()">加载 note1.html</button>
            <button onclick="loadNote3()">加载 note3.html (Java大纲)</button>
            <button onclick="loadNote5()">加载 note5.html</button>
            <button onclick="clearLog()">清除日志</button>
        </div>
        
        <iframe id="testFrame"></iframe>
        
        <div class="log" id="log"></div>
    </div>

    <script>
        function log(message) {
            const logElement = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            logElement.innerHTML += `${timestamp}: ${message}<br>`;
            logElement.scrollTop = logElement.scrollHeight;
            console.log(message);
        }
        
        function clearLog() {
            document.getElementById('log').innerHTML = '';
        }
        
        function loadNote(filename, title) {
            log(`开始加载: ${title} (${filename})`);
            
            const iframe = document.getElementById('testFrame');
            
            // 清除之前的内容和事件监听器
            iframe.src = '';
            iframe.onload = null;
            iframe.onerror = null;
            
            // 设置加载完成处理
            iframe.onload = function() {
                log(`✓ 加载成功: ${title}`);
                
                // 检查iframe内容
                try {
                    const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                    if (iframeDoc) {
                        const docTitle = iframeDoc.title || '无标题';
                        const bodyContent = iframeDoc.body ? iframeDoc.body.innerHTML.length : 0;
                        log(`  - 文档标题: ${docTitle}`);
                        log(`  - 内容长度: ${bodyContent} 字符`);
                    }
                } catch (error) {
                    log(`  - 无法访问iframe内容: ${error.message}`);
                }
            };
            
            // 设置错误处理
            iframe.onerror = function(error) {
                log(`✗ 加载失败: ${title} - ${error}`);
            };
            
            // 加载笔记内容
            log(`设置iframe src为: ${filename}`);
            iframe.src = filename;
        }
        
        function loadNote1() {
            loadNote('note1.html', '第一篇笔记');
        }
        
        function loadNote3() {
            loadNote('note3.html', 'Java基础学习大纲');
        }
        
        function loadNote5() {
            loadNote('note5.html', 'MySQL基础学习大纲');
        }
        
        // 页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', () => {
            log('测试页面加载完成');
        });
    </script>
</body>
</html>